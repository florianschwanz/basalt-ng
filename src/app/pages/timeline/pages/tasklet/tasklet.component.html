<div (keydown)="onKeyDown($event)" class="main">
  <mat-sidenav-container class="sidenav-container" layout="column">
    <mat-sidenav *ngIf="media > mediaType.MEDIUM" #sidenavStart mode="side"
                 position="start" opened="true"
                 class="sidenav sidenav-start">
      <div [@toolbarAnimation]="scrollDirection">
      </div>
    </mat-sidenav>

    <mat-sidenav *ngIf="media > mediaType.MEDIUM" #sidenavEnd mode="side"
                 position="end" opened="true"
                 class="sidenav sidenav-end">
      <div [@toolbarAnimation]="scrollDirection">
      </div>
    </mat-sidenav>

    <mat-sidenav-content cdkScrollable>
      <div class="content">
        <button mat-button routerLink="/timeline">Back to timeline</button>
        <form #formCtrl="ngForm">
          <!-- Pseudo form field to make other input fields work -->
          <mat-form-field style="width: 0; height: 0;"><input matInput="" /></mat-form-field>
          <app-tasklet-type-fragment [tasklet]="tasklet" (taskletTypeEventEmitter)="onTaskletTypeChanged($event)">
          </app-tasklet-type-fragment>
          <app-task-autocomplete-fragment class="task"
                                          [task]="task" [taskOptions]="taskOptions"
                                          (taskChangedEmitter)="onTaskChanged($event)"
                                          *ngIf="canBeAssignedToTask(tasklet)">
          </app-task-autocomplete-fragment>
          <app-description-fragment *ngIf="containsDescription(tasklet)"
                                    [description]="tasklet.description"
                                    (descriptionChangedEmitter)="onDescriptionChanged($event)"></app-description-fragment>
          <app-meeting-minutes-fragment
            *ngIf="tasklet.type == taskletType.MEETING || tasklet.type == taskletType.CALL"
            [meetingMinuteItems]="tasklet.meetingMinuteItems"
            [personOptions]="personOptions"
            [myselfOption]="myselfOption"
            (meetingMinuteItemsUpdatedEmitter)="onMeetingMinuteItemsUpdated($event)"></app-meeting-minutes-fragment>

          <app-daily-scrum-fragment *ngIf="tasklet.type == taskletType.DAILY_SCRUM"
                                    [dailyScrumItems]="tasklet.dailyScrumItems"
                                    [personOptions]="personOptions"
                                    [myselfOption]="myselfOption"
                                    (dailyScrumItemsUpdatedEmitter)="onDailyScrumItemsUpdated($event)">
          </app-daily-scrum-fragment>

          <app-tag-chips *ngIf="containsTags(tasklet)"
                         class="tag-area"
                         [tags]="tags | tagNames"
                         [tagOptions]="tagOptions"
                         [readonly]=false
                         (tagsChangedEmitter)="onTagsChanged($event)">
          </app-tag-chips>
          <app-tag-chips *ngIf="containsPersons(tasklet)"
                         class="tag-area"
                         [tags]="persons | personNames"
                         [tagOptions]="personOptions"
                         [readonly]=false
                         placeholder="New person"
                         (tagsChangedEmitter)="onPersonsChanged($event)">
          </app-tag-chips>
        </form>
        <div class="flexcontainer button-area">
          <button mat-button color="warn" *ngIf="mode == modeType.UPDATE" (click)="deleteTasklet()">
            Delete tasklet
          </button>
          <div class="flexbox"></div>
          <button mat-button *ngIf="tasklet.type == taskletType.MEETING || tasklet.type == taskletType.CALL"
                  (click)="sendMeetingMinutes()" [disabled]="!formCtrl.form.valid">
            Send Meeting Minutes
          </button>
          <button mat-button *ngIf="tasklet.type == taskletType.DAILY_SCRUM" (click)="sendDailyScrumSummary()"
                  [disabled]="!formCtrl.form.valid">
            Send Daily Scrum Summary
          </button>
          <button mat-button *ngIf="mode == modeType.ADD" (click)="addTasklet()" [disabled]="!formCtrl.form.valid
        && canBeCreated()">
            Add tasklet
          </button>
          <button mat-button *ngIf="mode == modeType.UPDATE" (click)="updateTasklet()" [disabled]="!formCtrl.form.valid
        && canBeUpdated()">
            Update tasklet
          </button>
          <button mat-button *ngIf="mode == modeType.CONTINUE" (click)="continueTasklet()"
                  [disabled]="!formCtrl.form.valid">
            Continue tasklet
          </button>
        </div>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>

















